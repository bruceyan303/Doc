<!--
 * @Author: bruceyan
 * @Date: 2021-08-09 15:34:55
 * @LastEditTime: 2021-08-09 19:47:02
 * @LastEditors: bruceyan
 * @Description: 
 * @FilePath: \doc\编程\vue\09监视属性\5姓名案例_watch实现.html
 * 
-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>5姓名案例_watch实现</title>
    <script type="text/javascript" src="../js/vue.js"></script>
</head>
<!-- computed 和watch区别：
     1.computed能实现的哦功能，watch都可以完成。
     2.watch 能完成的功能，computed 不一定能完成。例如：watch可以进行异步操作。
     两个重要的小原则：
     1.所被vue管理的函数，最好写的普通函数，这样this的指针才是vm 或 组件实例对象。
     2.所有不被vue所管理的函数（定时器的回调函数，ajax的回调函数等，promise的回调函数），最好写成箭头函数，
     这样this的指针才是vm或组件实例对象
-->

<body>
    <div id="root">

        姓：<input type="text" v-model="firstname"><br /><br />
        名：<input type="text" v-model="lastname"><br /><br />
        测试 <input type="text" v-model="x"><br /><br />
        姓名：<span>{{fullname}}</span><br /><br />



    </div>
</body>
<script type="text/javascript">
    Vue.config.productionTip = false //阻止vue 在启动是生成生产提示
    const vm = new Vue({
        el: '#root', //用于指定当前vue实例为那个容器服务，值通常为css选择器字符串
        data: {
            name: "main",
            firstname: "张",
            lastname: "三",
            fullname: '张-三',
            x: "测试"
        },
        methods: {

        },
        computed: {


        },
        watch: {
            firstname(newname, oldname) {
                setTimeout(() => {
                    this.fullname = newname + '-' + this.lastname
                }, 1000);
                //错误 windows
                // setTimeout(function () {
                //     this.fullname = newname + '-' + this.lastname
                // }, 1000);
            },
            lastname(newname, oldname) {
                this.fullname = this.firstname + '-' + newname
            }


        }
    })
</script>

</html>