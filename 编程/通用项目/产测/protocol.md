![logo](http://www.szxinken.com/cn/images/logo.png "信恳logo")

# **信恳测试底板 交互协议**

#### v0.0.1 起草信恳底板控制---20201205 bruceayn

#### v0.0.2 测试通道的 EN，iO 和 power 指令合并通道控制指令---20201207 bruceayn

## **总则**

1. 要求下发指令后要等待应答后再发下发新的指令
2. 如下强行不等待应答指令、如果遇到没有上条指令未完成则返回 BUSY

## **一、串口切换**

### A 流控制设置

RTS(true) 低 发送完成后恢复 RTS(false) 高

### B 串口直通(PC 端固定 230400)

| 命令  | 分隔符 | 原串口 | 分隔符 | 波特率 | 结束符 |
| ----- | ------ | ------ | ------ | ------ | ------ |
| USART | ，     | 1/2    | ，     | 115200 | \r\n   |

| 命令  | 分隔符 | 返回    |     |     | 结束符 |
| ----- | ------ | ------- | --- | --- | ------ |
| USART | ，     | OK/FAIL |     |     | \r\n   |

## **二、IO 控制**

### A 流控制设置

RTS(false) 高

### B 控制 IO 电平高低

| 命令  | 分隔符 | 管脚  | 分隔符 | 高低 | 结束符 |
| ----- | ------ | ----- | ------ | ---- | ------ |
| GPIOC | ，     | 1--10 | ，     | 1/0  | \r\n   |

| 命令  | 分隔符 | 返回    | 结束符 |
| ----- | ------ | ------- | ------ |
| GPIOC | ，     | OK/FAIL | \r\n   |

## 三、测试通道控制

### A 流控制设置

RTS(false) 高

### B 测试通道 EN（0）、IO（1）、POWER（2） 控制

| 命令    | 分隔符 | 通路 | 分隔符 | 开关    | 分隔符 | 高低 | 结束符 |
| ------- | ------ | ---- | ------ | ------- | ------ | ---- | ------ |
| CHANNEL | ，     | 1/2  | ，     | 0，1，2 | ，     | 1/0  | \r\n   |

| 命令    | 分隔符 | 返回    | 结束符 |
| ------- | ------ | ------- | ------ |
| CHANNEL | ，     | OK/FAIL | \r\n   |

## **四、查看版本**

### A 流控制设置

RTS(true) 低 交互完成后 恢复 RTS(false) 高

### B 查看版本命令和返回

| 命令    | 结束符 |
| ------- | ------ |
| VERSION | \r\n   |

| 返回    | 分隔符 | 功能版本 | 分隔符 | 协议版本 | 分隔符 | 编译时间 | 结束符 |
| ------- | ------ | -------- | ------ | -------- | ------ | -------- | ------ |
| VERSION | ，     | XXX      | ，     | 0.0.1    | ，     | XXX      | \r\n   |
